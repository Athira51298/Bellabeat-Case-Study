---
title: "Bellabeat Case Study"
author: "Athira Unnikrishnan"
date: "2022-12-17"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction


Welcome to the Bellabeat data analysis case study! 

In this case study, you will perform many real-world tasks of a junior data
analyst. You will imagine you are working for Bellabeat, a high-tech manufacturer of health-focused products for women, and
meet different characters and team members. In order to answer the key business questions, you will follow the steps of the
data analysis process: ask, prepare, process, analyze, share, and act. Along the way, the Case Study Roadmap tables —
including guiding questions and key tasks — will help you stay on the right path

### Ask

Stakeholder wants us to analyze smart device usage data in order to gain insights into how customers use non-Bellabeat smart devices.
Then, using this information, they would like to get a high-level recommendations for how these trends can inform Bellabeat marketing strategy.

### Prepare

Products of Bellabeat used for analysis purpose:

**Bellabeat app**

The Bellabeat app provides users with health data related to their activity, sleep, stress,
menstrual cycle, and mindfulness habits. This data can help users better understand their current habits and
make healthy decisions. The Bellabeat app connects to their line of smart wellness products

**Time**

This wellness watch combines the timeless look of a classic timepiece with smart technology to track user
activity, sleep, and stress. The Time watch connects to the Bellabeat app to provide you with insights into your
daily wellness.

**Data set used:**

**FitBit Fitness Tracker Data** - [link](https://www.kaggle.com/datasets/arashnic/fitbit)

This dataset was generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. 

### Process

Data choosen for analysis includes:

* dailyActivity_merged.csv
* dailyCalories_merged.csv
* dailySteps_merged.csv
* sleepDay_merged.csv

For each of the tables, I've added *'DaysofWeek'* column to convert the Dates to Days of week format.This formatting was performed in excel with the following command:

    =TEXT(cell_no,"dddd")


Checking for null values and duplicates if any 


```{r tables}
#using required packages

library("tidyverse")
library("ggplot2")
library("skimr")
library("sqldf")
library("dplyr")
library("lubridate")
library("plotly")

#Read .csv files 
Daily_activity <- read.csv("dailyActivity.csv")
Daily_steps <- read.csv("dailySteps.csv")
Daily_Calories <- read.csv("dailyCalories.csv")
Daily_sleep <- read.csv("dailySleep.csv")


sum(duplicated(Daily_activity))
sum(duplicated(Daily_steps))
sum(duplicated(Daily_Calories))
sum(duplicated(Daily_sleep))
```

As you can see, we have 3 duplicates in Daily_sleep, which was cleaned with distinct function and saved to daily_sleep table.

```{r sleep}

daily_sleep <- Daily_sleep %>% distinct()
sum(duplicated(daily_sleep))

```

### Analyse

Analyzing the data present in each of the tables

```{r analyse}

glimpse(Daily_activity)
glimpse(Daily_Calories)
glimpse(Daily_steps)
glimpse(daily_sleep)

```

As per the analysis could get the following insights:

* People use the fitness watch mainly during weekends. On these days, activity is shown as high 
* During the weekends, people walk more distance 
* Classified the data on sleep track into three

    *Bad Sleep* - If the SQC percentage is less than 85 then its considered as bad sleep
    
    *Healthy Sleep* - If the SQC percentage lies between 85 and 90 then its considered as a healthy sleep
    
    *Very Good Sleep* - If th SQC percentage is greater than 90 then its considered as a very good sleep
    

```{r SQC}
##Sleep Quality Check
SQC = (daily_sleep$TotalMinutesAsleep/daily_sleep$TotalTimeInBed)*100
SQC_Check <- as.integer(SQC)
Sleep <- mutate(daily_sleep,SQC=SQC_Check)

healthy_sleep <- Sleep %>% filter(between(SQC,85,90))%>% group_by(Id) 
health_sleep_cnt <- nrow(healthy_sleep)

very_good_sleep <- Sleep %>% filter(SQC>90)%>% group_by(Id)
good_sleep_cnt <- nrow(very_good_sleep)

bad_sleep <-Sleep %>% filter(SQC<85)%>% group_by(Id)
bad_sleep_cnt <- nrow(bad_sleep)
```

   And could observe the following insights from data:

     76.3% people have a very good sleep
     15.6% people have a halthy sleep 
     only 8.05% of people have bad sleep.

* I have classified users into three based on their Sedentary lifestyle in minutes.

      Less Active users
      Moderately Active users
      Highly Active users


```{r Users}

summary(Daily_activity)
LessActive <- Daily_activity %>% filter(SedentaryMinutes<300)
less <- nrow(LessActive)

ModerateActive <- Daily_activity %>% filter(between(SedentaryMinutes,300,1000))
moderate <- nrow(ModerateActive) 

HighlyActive <- Daily_activity %>% filter(SedentaryMinutes>1000) 
high <- nrow(HighlyActive)

```
 And could observe the following insights from data:

      42.3% of people are less active users
      46.2% of people are moderate users of the device
      11.5% of people are only very active users of device

* As the distance covered increases, number of steps also increases. From the visualization could observe that most of people takes more distance and steps during weekend.

### Visualize

Visual representation of the above analysis is as shown below:

* The below chart depicts the activity period during days of a week. As given below, I could observe that the activity is high during weekends as compared to weekdays

```{r Daily_activity, echo=FALSE}

p<-ggplot(data=Daily_activity)+
  geom_line(mapping=aes(x=VeryActiveDistance,y=VeryActiveMinutes))+
  facet_wrap(~DaysofWeek)
p+labs(title="Activity Period during days of a week")+theme(plot.title=element_text(hjust=0.5))+
  labs(y= "Minute", x = "Distance")

```

* Below line graph depicts that as the number of steps increases, total distance covered also increases. This is a basic observation. But we have classified it according to days of the week. 
 
   As shown below, I could observe that the distance covered is high during weekends as compared to weekdays

```{r DistancevsSteps, echo=FALSE}

q<-ggplot(data=Daily_activity)+
  geom_line(mapping=aes(x=TotalDistance,y=TotalSteps))+
  facet_wrap(~DaysofWeek)
q+labs(title="Total Distance vs Total Steps")+theme(plot.title=element_text(hjust=0.5))+
  labs(y= "Steps", x = "Distance")


```

* Below chart shows that the people covered more distances during weekends as compared to weekdays.

```{r StepsvsDistance, echo=FALSE}

r<- ggplot(data=Daily_activity)+
  geom_jitter(mapping=aes(x=TotalDistance,y=TotalSteps))+
  facet_wrap(~DaysofWeek)
r+labs(title="Distance walked/ran during Days of Week")+theme(plot.title=element_text(hjust=0.5))+
  labs(y= "Steps", x = "Distance")

```

* Below pie chart is a classification of users based on their activity:


```{r useractivity, echo=FALSE}

percentage <- data.frame(
  level=c("Sedentary User","Moderate User","Very Active User"),
  cnt=c(less,moderate,high))

colors <- c('rgb(51,153,255)', 'rgb(255,102,102)', 'rgb(255,255,102)', 'rgb(171,104,87)', 'rgb(114,147,203)')

s<-plot_ly(percentage, labels = ~level, values = ~cnt, type = 'pie',textposition = 'outside',textinfo = 'label+percent',insidetextorientation='radial',marker = list(colors = colors,
                                                                                                                                                                    line = list(color = '#FFFFFF', width = 1)))
t <- s %>% layout(title = 'Classification of users based on their activity',
                      xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
                      yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))
t

```

* Below pie chart depicts the sleep quality of each of the individuals in percentage



```{r SQC_Check, echo=FALSE}
Sleep_visual <- data.frame(
  s_type=c("Healthy Sleep","Very Good Sleep","Bad Sleep"),
  s_cnt=c(health_sleep_cnt,good_sleep_cnt,bad_sleep_cnt))

fig<- plot_ly(Sleep_visual, labels = ~s_type, values = ~s_cnt, type = 'pie',textposition = 'inside',textinfo = 'label+percent',insidetextorientation='radial')
fig <- fig %>% layout(title = 'Classification based on Sleep Quality',
                      xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
                      yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))

fig

```


### Act (Recommendations)  

Based on my analysis, I would provide the following recommendations:

* Active usage of device happens only during weekends.Users should get notified to use the device on week days as well.

* Notifications should be catchy that it should make users feel the need of using the device.

* From analysis, could observe people cover distances either via walking or running only during weekends. They should get an urge to do the same on week days as well.This could be done by setting an alarm notification for the same.

* One other suggestion that I would bring is to set an alarm notification for drinking water, since it has a lot of health  benefits.

* The device should also suggest users for a best sleeping time in order to get a very good deep sleep.

* The device should be able to detect stress levels of the user daily.

* User should be provided with a daily target to walk or run this much distance or steps.If they attain the target they should be rewarded with points.Later these points can be claimed/redeemed to buy any sports item from a premium sports shop

                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        